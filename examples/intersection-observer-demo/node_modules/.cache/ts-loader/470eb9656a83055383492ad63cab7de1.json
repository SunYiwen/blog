{"remainingRequest":"/Users/evensun/vue3-app/node_modules/babel-loader/lib/index.js!/Users/evensun/vue3-app/node_modules/ts-loader/index.js??ref--15-2!/Users/evensun/vue3-app/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/evensun/vue3-app/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/evensun/vue3-app/src/App.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/evensun/vue3-app/src/App.vue","mtime":1647789324337},{"path":"/Users/evensun/vue3-app/babel.config.js","mtime":1647696323064},{"path":"/Users/evensun/vue3-app/node_modules/cache-loader/dist/cjs.js","mtime":1647691687777},{"path":"/Users/evensun/vue3-app/node_modules/babel-loader/lib/index.js","mtime":1647691687995},{"path":"/Users/evensun/vue3-app/node_modules/ts-loader/index.js","mtime":1647693675933},{"path":"/Users/evensun/vue3-app/node_modules/cache-loader/dist/cjs.js","mtime":1647691687777},{"path":"/Users/evensun/vue3-app/node_modules/vue-loader-v16/dist/index.js","mtime":1647691687991}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvZXZlbnN1bi92dWUzLWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9ldmVuc3VuL3Z1ZTMtYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL2V2ZW5zdW4vdnVlMy1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzLmpzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvVXNlcnMvZXZlbnN1bi92dWUzLWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCB7IFZ1ZSwgc2V0dXAgfSBmcm9tICJ2dWUtY2xhc3MtY29tcG9uZW50IjsKaW1wb3J0IHsgb25Nb3VudGVkLCByZWYsIHJlYWN0aXZlIH0gZnJvbSAidnVlIjsKCmZ1bmN0aW9uIHVzZVNlbGVjdGVkKCkgewogIHZhciBhY3RpdmVLZXkgPSByZWYoMCk7CgogIHZhciB0YWdTZWxlY3RlZCA9IGZ1bmN0aW9uIHRhZ1NlbGVjdGVkKGluZGV4KSB7CiAgICBhY3RpdmVLZXkudmFsdWUgPSBpbmRleDsKICB9OwoKICB2YXIgcXVldWUgPSByZWFjdGl2ZShbXSk7CiAgdmFyIHF1ZXVlU2V0ID0gbmV3IFNldCgpOwoKICB2YXIgYWRkT2JzZXJ2ZXIgPSBmdW5jdGlvbiBhZGRPYnNlcnZlcigpIHsKICAgIHZhciByb290ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIiNkZW1vLXNjcm9sbCIpOwogICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgIHJvb3Q6IHJvb3QsCiAgICAgIHRocmVzaG9sZDogWzBdCiAgICB9OwoKICAgIHZhciBoYW5kbGVJbnRlcnNlY3QgPSBmdW5jdGlvbiBoYW5kbGVJbnRlcnNlY3QoZW50cmllcykgewogICAgICBlbnRyaWVzLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7CiAgICAgICAgdmFyIF9lbnRyeSR0YXJnZXQ7CgogICAgICAgIC8vIOino+aekGlkCiAgICAgICAgdmFyIGlkID0gKGVudHJ5ID09PSBudWxsIHx8IGVudHJ5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2VudHJ5JHRhcmdldCA9IGVudHJ5LnRhcmdldCkgPT09IG51bGwgfHwgX2VudHJ5JHRhcmdldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2VudHJ5JHRhcmdldC5pZC5zcGxpdCgiLSIpWzFdKSB8fCAwOyAvLyDnm7jkuqQKCiAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7CiAgICAgICAgICBpZiAoIXF1ZXVlU2V0LmhhcyhpZCkpIHsKICAgICAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA+IDAgJiYgTWF0aC5hYnMoaWQgLSBxdWV1ZVtxdWV1ZS5sZW5ndGggLSAxXSkgIT09IDEpIHsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygicmV2ZXJzZToiLCBxdWV1ZSk7CiAgICAgICAgICAgICAgcXVldWUucmV2ZXJzZSgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBxdWV1ZS5wdXNoKGlkKTsKICAgICAgICAgICAgcXVldWVTZXQuYWRkKGlkKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA+IDAgJiYgKGFjdGl2ZUtleS52YWx1ZSA9PSAwIHx8IGFjdGl2ZUtleS52YWx1ZSA9PSA0KSAmJiBxdWV1ZVtxdWV1ZS5sZW5ndGggLSAxXSA9PSBhY3RpdmVLZXkudmFsdWUpIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coInJldmVyc2U6IiwgcXVldWUpOwogICAgICAgICAgICBxdWV1ZS5yZXZlcnNlKCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGlkID09IHF1ZXVlWzBdKSB7CiAgICAgICAgICAgIHF1ZXVlU2V0LmRlbGV0ZShxdWV1ZVswXSk7CiAgICAgICAgICAgIHF1ZXVlLnNoaWZ0KCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZygicXVldWU6IiwgcXVldWUpOwoKICAgICAgICBpZiAocXVldWUubGVuZ3RoID4gMCkgewogICAgICAgICAgaWYgKHF1ZXVlW3F1ZXVlLmxlbmd0aCAtIDFdID09IDAgfHwgcXVldWVbcXVldWUubGVuZ3RoIC0gMV0gPT0gNCkgewogICAgICAgICAgICBhY3RpdmVLZXkudmFsdWUgPSBxdWV1ZVtxdWV1ZS5sZW5ndGggLSAxXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFjdGl2ZUtleS52YWx1ZSA9IHF1ZXVlWzBdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9OwoKICAgIHZhciBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihoYW5kbGVJbnRlcnNlY3QsIG9wdGlvbnMpOwogICAgdmFyIGJveGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiZGVtby1ib3giKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJveGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgIG9ic2VydmVyLm9ic2VydmUoYm94ZXNbaV0pOwogICAgfQogIH07IC8vIOWFg+e0oOaMgui9veWujOaIkOeahOaXtuWAmeazqOWGjOebkeWQrAoKCiAgb25Nb3VudGVkKGFkZE9ic2VydmVyKTsKICByZXR1cm4gewogICAgYWN0aXZlS2V5OiBhY3RpdmVLZXksCiAgICB0YWdTZWxlY3RlZDogdGFnU2VsZWN0ZWQKICB9Owp9Cgp2YXIgQXBwID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVnVlKSB7CiAgX2luaGVyaXRzKEFwcCwgX1Z1ZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoQXBwKTsKCiAgZnVuY3Rpb24gQXBwKCkgewogICAgdmFyIF90aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBcHApOwoKICAgIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICBfdGhpcy50YWdMaXN0ID0gWyJ0YWcwIiwgInRhZzEiLCAidGFnMiIsICJ0YWczIiwgInRhZzQiXTsKICAgIF90aGlzLmhlaWdodExpc3QgPSBbMTAwLCAyMDAsIDQwMCwgNzAwLCAzMDBdOwogICAgX3RoaXMuc2VsZWN0ZXIgPSBzZXR1cChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB1c2VTZWxlY3RlZCgpOwogICAgfSk7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICByZXR1cm4gX2NyZWF0ZUNsYXNzKEFwcCk7Cn0oVnVlKTsKCmV4cG9ydCB7IEFwcCBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/Users/evensun/vue3-app/src/App.vue"],"names":["Vue","setup","onMounted","ref","reactive","useSelected","activeKey","tagSelected","index","value","queue","queueSet","Set","addObserver","root","document","getElementById","options","threshold","handleIntersect","entries","forEach","entry","id","target","split","isIntersecting","has","length","Math","abs","reverse","push","add","delete","shift","console","log","observer","IntersectionObserver","boxes","getElementsByClassName","i","observe","App","arguments","tagList","heightList","selecter"],"mappings":"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","sourcesContent":["import { Vue, setup } from \"vue-class-component\";\nimport { onMounted, ref, reactive } from \"vue\";\nfunction useSelected() {\n    let activeKey = ref(0);\n    const tagSelected = (index) => {\n        activeKey.value = index;\n    };\n    const queue = reactive([]);\n    const queueSet = new Set();\n    const addObserver = () => {\n        const root = document.getElementById(\"#demo-scroll\");\n        let options = {\n            root,\n            threshold: [0],\n        };\n        const handleIntersect = (entries) => {\n            entries.forEach((entry) => {\n                // 解析id\n                const id = entry?.target?.id.split(\"-\")[1] || 0;\n                // 相交\n                if (entry.isIntersecting) {\n                    if (!queueSet.has(id)) {\n                        if (queue.length > 0 && Math.abs(id - queue[queue.length - 1]) !== 1) {\n                            // console.log(\"reverse:\", queue);\n                            queue.reverse();\n                        }\n                        queue.push(id);\n                        queueSet.add(id);\n                    }\n                }\n                else {\n                    if (queue.length > 0 && (activeKey.value == 0 || activeKey.value == 4) && queue[queue.length - 1] == activeKey.value) {\n                        // console.log(\"reverse:\", queue);\n                        queue.reverse();\n                    }\n                    if (id == queue[0]) {\n                        queueSet.delete(queue[0]);\n                        queue.shift();\n                    }\n                }\n                console.log(\"queue:\", queue);\n                if (queue.length > 0) {\n                    if (queue[queue.length - 1] == 0 || queue[queue.length - 1] == 4) {\n                        activeKey.value = queue[queue.length - 1];\n                    }\n                    else {\n                        activeKey.value = queue[0];\n                    }\n                }\n            });\n        };\n        const observer = new IntersectionObserver(handleIntersect, options);\n        const boxes = document.getElementsByClassName(\"demo-box\");\n        for (let i = 0; i < boxes.length; i++) {\n            observer.observe(boxes[i]);\n        }\n    };\n    // 元素挂载完成的时候注册监听\n    onMounted(addObserver);\n    return {\n        activeKey,\n        tagSelected,\n    };\n}\nexport default class App extends Vue {\n    constructor() {\n        super(...arguments);\n        this.tagList = [\"tag0\", \"tag1\", \"tag2\", \"tag3\", \"tag4\"];\n        this.heightList = [100, 200, 400, 700, 300];\n        this.selecter = setup(() => useSelected());\n    }\n}\n"]}]}