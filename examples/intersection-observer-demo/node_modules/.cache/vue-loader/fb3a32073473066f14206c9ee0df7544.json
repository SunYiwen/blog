{"remainingRequest":"/Users/evensun/vue3-app/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/evensun/vue3-app/src/App.vue?vue&type=style&index=0&id=7ba5bd90&lang=scss&scoped=true","dependencies":[{"path":"/Users/evensun/vue3-app/src/App.vue","mtime":1647789324337},{"path":"/Users/evensun/vue3-app/node_modules/css-loader/dist/cjs.js","mtime":1647691687923},{"path":"/Users/evensun/vue3-app/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1647691688108},{"path":"/Users/evensun/vue3-app/node_modules/postcss-loader/src/index.js","mtime":1647691687991},{"path":"/Users/evensun/vue3-app/node_modules/sass-loader/dist/cjs.js","mtime":1647696959024},{"path":"/Users/evensun/vue3-app/node_modules/style-resources-loader/lib/index.js","mtime":1647696254344},{"path":"/Users/evensun/vue3-app/node_modules/cache-loader/dist/cjs.js","mtime":1647691687777},{"path":"/Users/evensun/vue3-app/node_modules/vue-loader-v16/dist/index.js","mtime":1647691687991}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5kZW1vIHsKICAmLWJveCB7CiAgICB3aWR0aDogMTAwJTsKICAgIHBhZGRpbmc6IDEwcHggMjRweDsKICAgIGJhY2tncm91bmQ6IHJnYig5NCwgMjE3LCAyMjYpOwogICAgZGlzcGxheTogZmxleDsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgICBtYXJnaW4tYm90dG9tOiAyMHB4OwogICAgZm9udC1zaXplOiA1MHB4OwogIH0KCiAgJi1zY3JvbGwgewogICAgYmFja2dyb3VuZDogcmdiYSgyMjQsIDE5MywgMjM2LCAwLjgpOwogICAgaGVpZ2h0OiA2MDBweDsKICAgIHdpZHRoOiAxMDAlOwogICAgbWFyZ2luLXRvcDogMjBweDsKICAgIG92ZXJmbG93LXk6IHNjcm9sbDsKICB9CgogICYtaGVhZGVyIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogcm93OwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBmb250LWZhbWlseTogIktpcmFuZyBIYWVyYW5nIiwgY3Vyc2l2ZTsKICAgIGZvbnQtc2l6ZTogNTBweDsKICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgfQoKICAmLWJvZHkgewogICAgZGlzcGxheTogZmxleDsKICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjsKICAgIHdpZHRoOiA2MDBweDsKICAgIG1hcmdpbjogMCBhdXRvOwogIH0KCiAgJi10YWdzIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogcm93OwogICAgbWFyZ2luLXRvcDogNTBweDsKICB9CgogICYtdGFnIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBmbGV4LWRpcmVjdGlvbjogcm93OwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICBhbGlnbi1jb250ZW50OiBjZW50ZXI7CiAgICBwYWRkaW5nOiA4cHggMTRweDsKICAgIGJhY2tncm91bmQ6IHJnYigxNDcsIDE3NywgMjMxKTsKICAgIHdpZHRoOiA4MHB4OwogICAgbWFyZ2luLXJpZ2h0OiAxMHB4OwogICAgYm9yZGVyLXJhZGl1czogMjBweDsKICAgIGZvbnQtc2l6ZTogMjBweDsKICAgIGZvbnQtZmFtaWx5OiAiQ29tZm9ydGFhIiwgY3Vyc2l2ZTsKCiAgICAmLmFjdGl2ZSB7CiAgICAgIGJhY2tncm91bmQ6IHJnYigxNzQsIDE0OCwgMjQ1KTsKICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["/Users/evensun/vue3-app/src/App.vue"],"names":[],"mappings":"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","file":"/Users/evensun/vue3-app/src/App.vue","sourceRoot":"","sourcesContent":["<template>\n  <link\n    href=\"https://fonts.font.im/css?family=Kirang+Haerang\"\n    rel=\"stylesheet\"\n  />\n  <link href=\"https://fonts.font.im/css?family=Comfortaa\" rel=\"stylesheet\" />\n\n  <view class=\"demo-body\">\n    <header class=\"demo-header\">Intersection Observer Demo</header>\n    <view class=\"demo-tags\">\n      <view\n        v-for=\"(tag, index) in tagList\"\n        :key=\"index\"\n        :class=\"['demo-tag', index == selecter.activeKey ? 'active' : '']\"\n      >\n        {{ tag }}\n      </view>\n    </view>\n\n    <view class=\"demo-scroll\" id=\"demo-scroll\">\n      <view\n        v-for=\"(height, index) in heightList\"\n        :key=\"index\"\n        class=\"demo-box\"\n        :style=\"{ height: `${height}px` }\"\n        :id=\"`box-${index}`\"\n      >\n        {{ index }}\n      </view>\n    </view>\n  </view>\n</template>\n\n<script lang=\"ts\">\nimport { Vue, setup } from \"vue-class-component\";\nimport { onMounted, ref, reactive } from \"vue\";\n\nfunction useSelected() {\n  let activeKey = ref(0);\n\n  const tagSelected = (index: number) => {\n    activeKey.value = index;\n  };\n\n  const queue: Array<number> = reactive([]);\n  const queueSet: Set<number> = new Set();\n  const addObserver = () => {\n    const root = document.getElementById(\"#demo-scroll\");\n    let options = {\n      root,\n      threshold: [0],\n    };\n\n    const handleIntersect = (entries: any) => {\n      entries.forEach((entry: any) => {\n        \n        // 解析id\n        const id = entry?.target?.id.split(\"-\")[1] || 0;\n\n        // 相交\n        if (entry.isIntersecting) {\n          if (!queueSet.has(id)) {\n            if (queue.length > 0 && Math.abs(id - queue[queue.length - 1]) !== 1) {\n              // console.log(\"reverse:\", queue);\n              queue.reverse();\n            }\n\n            queue.push(id);\n            queueSet.add(id);\n          }\n        } else {\n          if (queue.length > 0 && (activeKey.value == 0 || activeKey.value == 4) && queue[queue.length - 1] == activeKey.value) {\n            // console.log(\"reverse:\", queue);\n            queue.reverse();\n          }\n\n          if (id == queue[0]) {\n            queueSet.delete(queue[0]);\n            queue.shift();\n          }\n        }\n\n        console.log(\"queue:\", queue);\n\n        if (queue.length > 0) {\n          if (queue[queue.length - 1] == 0 || queue[queue.length - 1] == 4) {\n            activeKey.value = queue[queue.length - 1];\n          } else {\n            activeKey.value = queue[0];\n          }\n        }\n      });\n    };\n\n    const observer = new IntersectionObserver(handleIntersect, options);\n    const boxes = document.getElementsByClassName(\"demo-box\");\n    for (let i = 0; i < boxes.length; i++) {\n      observer.observe(boxes[i]);\n    }\n  };\n  \n  // 元素挂载完成的时候注册监听\n  onMounted(addObserver);\n\n  return {\n    activeKey,\n    tagSelected,\n  };\n}\n\nexport default class App extends Vue {\n  tagList = [\"tag0\", \"tag1\", \"tag2\", \"tag3\", \"tag4\"];\n  heightList = [100, 200, 400, 700, 300];\n  selecter = setup(() => useSelected());\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.demo {\n  &-box {\n    width: 100%;\n    padding: 10px 24px;\n    background: rgb(94, 217, 226);\n    display: flex;\n    box-sizing: border-box;\n    margin-bottom: 20px;\n    font-size: 50px;\n  }\n\n  &-scroll {\n    background: rgba(224, 193, 236, 0.8);\n    height: 600px;\n    width: 100%;\n    margin-top: 20px;\n    overflow-y: scroll;\n  }\n\n  &-header {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    font-family: \"Kirang Haerang\", cursive;\n    font-size: 50px;\n    margin-top: 20px;\n  }\n\n  &-body {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-content: center;\n    width: 600px;\n    margin: 0 auto;\n  }\n\n  &-tags {\n    display: flex;\n    flex-direction: row;\n    margin-top: 50px;\n  }\n\n  &-tag {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-content: center;\n    padding: 8px 14px;\n    background: rgb(147, 177, 231);\n    width: 80px;\n    margin-right: 10px;\n    border-radius: 20px;\n    font-size: 20px;\n    font-family: \"Comfortaa\", cursive;\n\n    &.active {\n      background: rgb(174, 148, 245);\n      font-weight: bold;\n    }\n  }\n}\n</style>\n"]}]}